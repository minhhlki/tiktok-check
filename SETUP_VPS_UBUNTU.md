# üöÄ H∆Ø·ªöNG D·∫™N C√ÄI ƒê·∫∂T TR√äN VPS UBUNTU (GOOGLE CLOUD)

H∆∞·ªõng d·∫´n chi ti·∫øt t·ª´ A-Z ƒë·ªÉ ch·∫°y TikTok Statistics Analyzer tr√™n VPS Ubuntu m·ªõi.

---

## üìã Y√äU C·∫¶U

- VPS Ubuntu 20.04 ho·∫∑c 22.04 (Google Cloud Platform)
- Quy·ªÅn root ho·∫∑c sudo
- K·∫øt n·ªëi internet

---

## üîß B∆Ø·ªöC 1: K·∫æT N·ªêI V√Ä C·∫¨P NH·∫¨T H·ªÜ TH·ªêNG

### 1.1. K·∫øt n·ªëi SSH v√†o VPS

```bash
# T·ª´ m√°y local, k·∫øt n·ªëi SSH
ssh username@your-vps-ip

# Ho·∫∑c t·ª´ Google Cloud Console, click "SSH" button
```

### 1.2. C·∫≠p nh·∫≠t h·ªá th·ªëng

```bash
# Update danh s√°ch package
sudo apt update

# Upgrade c√°c package hi·ªán c√≥
sudo apt upgrade -y

# C√†i ƒë·∫∑t c√°c c√¥ng c·ª• c∆° b·∫£n
sudo apt install -y wget curl git vim software-properties-common
```

---

## üêç B∆Ø·ªöC 2: C√ÄI ƒê·∫∂T PYTHON 3.8+

### 2.1. Ki·ªÉm tra phi√™n b·∫£n Python

```bash
python3 --version
```

**N·∫øu Python >= 3.8:** B·ªè qua b∆∞·ªõc 2.2, chuy·ªÉn sang 2.3

**N·∫øu Python < 3.8 ho·∫∑c ch∆∞a c√≥:** Ti·∫øp t·ª•c b∆∞·ªõc 2.2

### 2.2. C√†i ƒë·∫∑t Python 3.11 (n·∫øu c·∫ßn)

```bash
# Th√™m repository
sudo add-apt-repository ppa:deadsnakes/ppa -y
sudo apt update

# C√†i Python 3.11
sudo apt install -y python3.11 python3.11-venv python3.11-dev

# Set Python 3.11 l√†m m·∫∑c ƒë·ªãnh (optional)
sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.11 1
```

### 2.3. C√†i ƒë·∫∑t pip

```bash
# C√†i pip
sudo apt install -y python3-pip

# Upgrade pip
python3 -m pip install --upgrade pip

# Ki·ªÉm tra
pip3 --version
```

---

## üì¶ B∆Ø·ªöC 3: C√ÄI ƒê·∫∂T DEPENDENCIES H·ªÜ TH·ªêNG

### 3.1. C√†i ƒë·∫∑t c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt cho Playwright

```bash
# C√†i ƒë·∫∑t dependencies cho Chromium browser
sudo apt install -y \
    libnss3 \
    libnspr4 \
    libatk1.0-0 \
    libatk-bridge2.0-0 \
    libcups2 \
    libdrm2 \
    libdbus-1-3 \
    libxkbcommon0 \
    libxcomposite1 \
    libxdamage1 \
    libxfixes3 \
    libxrandr2 \
    libgbm1 \
    libpango-1.0-0 \
    libcairo2 \
    libasound2 \
    libatspi2.0-0 \
    libxshmfence1
```

---

## üì• B∆Ø·ªöC 4: CLONE REPOSITORY T·ª™ GITHUB

### 4.1. Clone code

```bash
# Di chuy·ªÉn v·ªÅ th∆∞ m·ª•c home
cd ~

# Clone repository
git clone https://github.com/minhhlki/tiktok-check.git

# Di chuy·ªÉn v√†o th∆∞ m·ª•c project
cd tiktok-check

# Ki·ªÉm tra files
ls -la
```

B·∫°n s·∫Ω th·∫•y c√°c file:
- `tiktok_counter.py`
- `tiktok_counter_improved.py`
- `requirements.txt`
- `README.md`
- etc.

---

## üéØ B∆Ø·ªöC 5: C√ÄI ƒê·∫∂T PYTHON PACKAGES

### 5.1. T·∫°o virtual environment (recommended)

```bash
# T·∫°o venv
python3 -m venv venv

# K√≠ch ho·∫°t venv
source venv/bin/activate

# Sau khi activate, prompt s·∫Ω c√≥ (venv) ·ªü ƒë·∫ßu
```

### 5.2. C√†i ƒë·∫∑t packages

```bash
# C√†i playwright
pip install playwright

# Ho·∫∑c t·ª´ requirements.txt
pip install -r requirements.txt

# Ki·ªÉm tra
pip list | grep playwright
```

---

## üåê B∆Ø·ªöC 6: C√ÄI ƒê·∫∂T PLAYWRIGHT BROWSERS

### 6.1. C√†i Chromium browser

```bash
# C√†i browser cho Playwright
playwright install chromium

# C√†i th√™m dependencies (n·∫øu c·∫ßn)
playwright install-deps chromium
```

**L∆∞u √Ω:** B∆∞·ªõc n√†y s·∫Ω download ~200MB, c√≥ th·ªÉ m·∫•t v√†i ph√∫t.

---

## ‚úÖ B∆Ø·ªöC 7: CH·∫†Y TH·ª¨ TOOL

### 7.1. Test v·ªõi phi√™n b·∫£n improved

```bash
# Ch·∫°y v·ªõi URL test
python tiktok_counter_improved.py https://www.tiktok.com/@tiktok --save

# Ho·∫∑c kh√¥ng save file
python tiktok_counter_improved.py https://www.tiktok.com/@tiktok
```

### 7.2. Ki·ªÉm tra k·∫øt qu·∫£

N·∫øu th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y:
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  TIKTOK CHANNEL VIEWS COUNTER IMPROVED   ‚ïë
‚ïë         Phi√™n b·∫£n: 1.0.2                 ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üöÄ B·∫Øt ƒë·∫ßu scrape k√™nh: https://www.tiktok.com/@tiktok
üñ•Ô∏è Ch·∫ø ƒë·ªô headless: True
[HH:MM:SS] ƒêang truy c·∫≠p: https://...
[HH:MM:SS] ƒêang t·∫£i danh s√°ch video...
...
```

---

## üî• B∆Ø·ªöC 8: S·ª¨ D·ª§NG TOOL

### 8.1. C√°c l·ªánh c∆° b·∫£n

```bash
# Ph√¢n t√≠ch k√™nh v√† l∆∞u JSON + CSV
python tiktok_counter.py https://www.tiktok.com/@username --save-json --save-csv

# Load nhi·ªÅu video h∆°n
python tiktok_counter.py https://www.tiktok.com/@username --max-scrolls 50

# S·ª≠ d·ª•ng version improved (ch√≠nh x√°c h∆°n)
python tiktok_counter_improved.py https://www.tiktok.com/@username --save
```

### 8.2. Xem file k·∫øt qu·∫£

```bash
# List files
ls -lh *.json *.csv

# Xem n·ªôi dung JSON
cat tiktok_stats_*.json

# Download file v·ªÅ m√°y local (t·ª´ m√°y local)
scp username@vps-ip:~/tiktok-check/*.json ./
scp username@vps-ip:~/tiktok-check/*.csv ./
```

---

## üìä B∆Ø·ªöC 9: CH·∫†Y TOOL ƒê·ªäNH K·ª≤ (OPTIONAL)

### 9.1. T·∫°o script t·ª± ƒë·ªông

```bash
# T·∫°o script
nano run_tiktok_check.sh
```

N·ªôi dung file:
```bash
#!/bin/bash
cd ~/tiktok-check
source venv/bin/activate

# Thay @username b·∫±ng k√™nh b·∫°n mu·ªën check
python tiktok_counter.py https://www.tiktok.com/@username --save-json --save-csv

# G·ª≠i file qua email ho·∫∑c upload l√™n storage (optional)
# V√≠ d·ª•: gsutil cp *.json gs://your-bucket/
```

### 9.2. Cho ph√©p execute

```bash
chmod +x run_tiktok_check.sh
```

### 9.3. Setup Cron job (ch·∫°y t·ª± ƒë·ªông)

```bash
# M·ªü crontab
crontab -e

# Th√™m d√≤ng n√†y ƒë·ªÉ ch·∫°y m·ªói ng√†y l√∫c 2 gi·ªù s√°ng
0 2 * * * /home/username/tiktok-check/run_tiktok_check.sh >> /home/username/tiktok-check/cron.log 2>&1
```

---

## üõ°Ô∏è B∆Ø·ªöC 10: B·∫¢O M·∫¨T & T·ªêI ∆ØU (IMPORTANT!)

### 10.1. C·∫•u h√¨nh Firewall

```bash
# Cho ph√©p SSH
sudo ufw allow ssh

# Enable firewall
sudo ufw enable

# Check status
sudo ufw status
```

### 10.2. T·∫Øt browser sau khi xong (tr√°nh memory leak)

Tool ƒë√£ t·ª± ƒë·ªông close browser, nh∆∞ng n√™n check:

```bash
# Check process
ps aux | grep chromium

# Kill n·∫øu c√≥ process treo
pkill -f chromium
```

### 10.3. Gi·ªõi h·∫°n t√†i nguy√™n (optional)

```bash
# T·∫°o file limits
sudo nano /etc/security/limits.conf

# Th√™m d√≤ng n√†y (thay username)
username soft nofile 4096
username hard nofile 8192
```

---

## ‚ö†Ô∏è TROUBLESHOOTING

### L·ªói 1: "Could not find browser"

```bash
# C√†i l·∫°i browser
playwright install chromium
playwright install-deps chromium
```

### L·ªói 2: "Permission denied"

```bash
# Fix quy·ªÅn cho th∆∞ m·ª•c
sudo chown -R $USER:$USER ~/tiktok-check
chmod -R 755 ~/tiktok-check
```

### L·ªói 3: "Memory error" ho·∫∑c "Process killed"

VPS c√≥ RAM th·∫•p, c·∫ßn:
```bash
# T·∫°o swap file (2GB)
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# Permanent swap
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

### L·ªói 4: "Timeout" khi scrape

```bash
# TƒÉng timeout trong code (line ~97 trong tiktok_counter.py)
# Ho·∫∑c d√πng VPN/Proxy
```

### L·ªói 5: "Encoding error" v·ªõi ti·∫øng Vi·ªát

```bash
# Set locale
sudo apt install -y language-pack-vi
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
```

---

## üéØ CHECKLIST HO√ÄN TH√ÄNH

- [ ] C·∫≠p nh·∫≠t h·ªá th·ªëng Ubuntu
- [ ] C√†i ƒë·∫∑t Python 3.8+
- [ ] C√†i ƒë·∫∑t pip
- [ ] C√†i ƒë·∫∑t dependencies h·ªá th·ªëng
- [ ] Clone repository t·ª´ GitHub
- [ ] T·∫°o virtual environment
- [ ] C√†i playwright package
- [ ] C√†i playwright browsers
- [ ] Test ch·∫°y tool th√†nh c√¥ng
- [ ] Setup firewall
- [ ] (Optional) Setup cron job

---

## üìû QUICK COMMANDS - COPY & PASTE

### C√†i ƒë·∫∑t nhanh (all-in-one):

```bash
# 1. Update system
sudo apt update && sudo apt upgrade -y
sudo apt install -y wget curl git vim python3 python3-pip python3-venv

# 2. Clone repo
cd ~ && git clone https://github.com/minhhlki/tiktok-check.git
cd tiktok-check

# 3. Setup venv
python3 -m venv venv
source venv/bin/activate

# 4. Install packages
pip install --upgrade pip
pip install playwright

# 5. Install browsers
playwright install chromium
playwright install-deps chromium

# 6. Test run
python tiktok_counter_improved.py https://www.tiktok.com/@tiktok
```

### Ch·∫°y l·∫°i sau khi reboot:

```bash
cd ~/tiktok-check
source venv/bin/activate
python tiktok_counter.py https://www.tiktok.com/@username --save-json
```

---

## üí° TIPS & TRICKS

### 1. Ch·∫°y trong background (kh√¥ng b·ªã ng·∫Øt khi logout)

```bash
# S·ª≠ d·ª•ng nohup
nohup python tiktok_counter.py https://www.tiktok.com/@username --save-json > output.log 2>&1 &

# Ho·∫∑c d√πng screen
sudo apt install screen
screen -S tiktok
python tiktok_counter.py https://www.tiktok.com/@username --save-json
# Ctrl+A+D ƒë·ªÉ detach
# screen -r tiktok ƒë·ªÉ attach l·∫°i
```

### 2. Monitor resource usage

```bash
# RAM usage
free -h

# CPU & processes
htop

# Disk space
df -h
```

### 3. Xem log real-time

```bash
tail -f output.log
```

### 4. Backup d·ªØ li·ªáu

```bash
# T·∫°o th∆∞ m·ª•c backup
mkdir -p ~/tiktok-check/backups

# Copy JSON files
cp *.json backups/

# Ho·∫∑c upload l√™n Google Cloud Storage
gsutil cp *.json gs://your-bucket/tiktok-stats/
```

---

## üåê GOOGLE CLOUD SPECIFIC

### M·ªü port (n·∫øu c·∫ßn web UI sau n√†y)

```bash
# T·ª´ GCP Console > VPC Network > Firewall rules
# Create rule:
# - Name: allow-http
# - Targets: All instances
# - Source IP ranges: 0.0.0.0/0
# - Protocols/ports: tcp:80,443
```

### TƒÉng disk space (n·∫øu thi·∫øu)

```bash
# Check disk
df -h

# T·ª´ GCP Console > Compute Engine > Disks
# Click v√†o disk > Edit > TƒÉng size
# Sau ƒë√≥ resize partition:
sudo growpart /dev/sda 1
sudo resize2fs /dev/sda1
```

---

## üìö T√ÄI LI·ªÜU THAM KH·∫¢O

- GitHub Repository: https://github.com/minhhlki/tiktok-check
- Playwright Docs: https://playwright.dev/python/
- Ubuntu Server Guide: https://ubuntu.com/server/docs

---

**üéâ HO√ÄN TH√ÄNH! B·∫°n ƒë√£ s·∫µn s√†ng ch·∫°y TikTok Statistics Analyzer tr√™n VPS!**

N·∫øu g·∫∑p v·∫•n ƒë·ªÅ, check ph·∫ßn Troubleshooting ho·∫∑c xem logs ƒë·ªÉ debug.

Good luck! üöÄ

